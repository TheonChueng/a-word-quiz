# 单词记忆测试应用需求文档

## 1. 引言

本文档旨在明确单词记忆测试应用（以下简称“应用”）的设计需求。该应用主要面向小学生用户，通过互动测试的方式帮助用户记忆英语单词，并提供错题回顾和专项练习功能。

## 2. 用户故事

- 作为一名小学生，我希望能有一个有趣的单词测试应用，帮助我记住通过CSV文件导入或应用内置的单词。
- 作为一名小学生，我希望在测试中，每道题都能给我一个英文单词和三个中文选项，让我选择正确的翻译。
- 作为一名小学生，我希望在我选择答案后，应用能立刻告诉我是否正确，并显示正确的答案、这个单词的例句和相关的笔记，同时伴有音效反馈。
- 作为一名小学生，我希望可以选择每轮测试的题目数量（例如10, 20, 30, 40题），并且能记录我完成测试的时间和得分。
- 作为一名小学生，我希望应用能保存我每次的测试记录，方便我回顾学习情况，并能查看答错的单词。
- 作为一名小学生，我希望能有一个专门的“错题本”功能，可以查看所有答错过单词，并能针对这些错题进行专项练习。
- 作为一名小学生，我希望应用的界面设计可爱、色彩鲜明，符合我的年龄特点，操作简单直观。
- 作为一名用户，我希望能导入自己的词库文件 (CSV格式)。
- 作为一名用户，我希望能导出和导入整个学习数据库，以便备份和迁移数据。

## 3. 功能需求

### 3.1 词库管理 (Vocabulary Management)

- **FR1.1**: 应用支持通过用户上传的 `.csv` 文件加载词库。
- **FR1.2**: CSV文件格式应为：`英文单词,中文翻译,"例句(可选)","笔记(可选)"`。每一行代表一个单词条目。例句和笔记部分如果包含逗号，需要用双引号括起来。
- **FR1.3**: 应用能够解析CSV文件，并将词汇数据存储到本地数据库 (IndexedDB)。
- **FR1.4**: 提供清除当前词库的功能（从数据库中移除）。

### 3.2 测试模块 (Quiz Module)

- **FR2.1**: 测试形式为“英文单词出题，提供三个中文翻译选项”。
    - **FR2.1.1**: 每道题目从当前词库中随机抽取一个英文单词作为题目。
    - **FR2.1.2**: 为该英文单词提供三个中文翻译选项，其中一个为正确答案（来自词库），另外两个为干扰项。
    - **FR2.1.3**: 干扰项应从词库中随机选择其他单词的中文翻译，并确保与正确答案不同且选项互不相同。
- **FR2.2**: 用户选择答案后，应用立即显示选择结果（正确/错误），并播放对应的音效。
- **FR2.3**: 无论用户选择是否正确，均展示该单词的正确中文翻译、例句（如果词库中提供）和笔记（如果词库中提供）。
- **FR2.4**: 用户可以选择每轮测试的题目数量，例如10题、20题、30题或40题。应用提供相应的选择界面。
- **FR2.5**: 应用需为每轮测试计时。
- **FR2.6**: 应用需为每轮测试计分，例如每答对一题得5分。
- **FR2.7**: 测试过程中，用户可以请求提示（显示正确答案的首字母或部分信息，当前实现为直接显示正确答案）。

### 3.3 记录与统计 (Records & Statistics)

- **FR3.1**: 应用需要使用IndexedDB保存用户每次测试的记录。
- **FR3.2**: 测试记录应至少包含：测试日期、测试用时、得分、总题数、答对题数、以及该次测试的错题列表（包含单词、用户答案、正确答案）。
- **FR3.3**: 用户可以查看历史测试记录，包括得分、用时、答对题数等，并能查看当次测试的错题详情。
- **FR3.4**: 提供删除单条历史测试记录的功能。

### 3.4 错题本与错题复习 (Wrong Answers Pool & Review)

- **FR4.1**: 所有在测试中答错的单词会自动记录到“错题池”中（存储于IndexedDB）。
- **FR4.2**: 用户可以查看“错题池”中的所有单词，包括单词、错误次数、最近错误日期、用户的错误答案、正确答案、例句和笔记。
- **FR4.3**: 用户可以从“错题池”中选择一定数量的单词进行专项复习测试（例如20题）。复习测试的模式与普通测试相同。
- **FR4.4**: 用户可以清空整个“错题池”。

### 3.5 用户界面 (UI)

- **FR5.1**: UI设计应具有低年龄倾向，色彩鲜明、图标可爱、字体清晰易读。
- **FR5.2**: 操作流程应简单直观，易于小学生理解和使用，包含明确的导航（如返回按钮）。
- **FR5.3**: 应用应提供清晰的加载、成功、错误等状态提示。
- **FR5.4**: 包含背景音乐和操作音效，并允许用户在设置中开启或关闭。

### 3.6 设置与数据管理 (Settings & Data Management)

- **FR6.1**: 用户可以在设置界面开启/关闭背景音乐和音效。
- **FR6.2**: 用户可以导出整个应用数据库 (`wordquiz_database.sqlite`) 进行备份。
- **FR6.3**: 用户可以导入之前导出的数据库文件以恢复数据。

## 4. 非功能需求

- **NFR1 (易用性)**: 应用应易于上手，小学生无需复杂指导即可开始测试。
- **NFR2 (性能)**: 题目加载、答案反馈应迅速，数据库操作高效，避免用户等待过久。
- **NFR3 (数据存储)**: 应用核心数据（词库、测试记录、错题池、设置）通过 IndexedDB (使用 `sql.js` 操作 SQLite Wasm 数据库) 可靠存储在用户本地。
- **NFR4 (兼容性)**: 作为本地Web应用，应兼容主流现代浏览器（如 Chrome, Firefox, Edge）。
- **NFR5 (本地运行)**: 应用设计为纯客户端运行，无需网络连接即可使用所有核心功能（首次加载 `sql-wasm.wasm` 文件除外）。

## 5. 假设与依赖

- **A1**: 用户能够提供符合指定格式的 `Vocabulary_List.csv` 文件进行词库导入。
- **A2**: 应用的运行环境（现代浏览器）能够支持 IndexedDB, WebAssembly (for `sql.js`) 和文件读取/下载操作。
- **D1**: 应用会使用 `sql.js` 和 `sql-wasm.wasm` 文件来支持 SQLite 数据库操作，这些文件需要与应用一同分发。

## 6. 技术栈概述

- **前端**: HTML5, CSS3, JavaScript (ES6+)。
- **核心逻辑**: 纯原生JavaScript (Vanilla JS)，模块化设计 (`app.js`, `ui.js`, `quiz.js`, `storage.js`, `vocabulary.js`)。
- **数据存储**: IndexedDB，通过 `sql.js` 库操作一个 SQLite 数据库 ( `wordquiz_database.sqlite` )。
- **辅助库**: `localforage` (可能用于简单的键值对存储，但主要数据在SQLite中)。

## 7. 未来考虑 (可选)

- 多种测试模式（如中文选英文、拼写测试等）。
- 用户账户系统，支持多用户使用（当前为单用户本地数据）。
- 学习进度可视化，如统计图表。
- 更细致的提示功能（例如逐字母提示）。

---
*文档版本: 2.0 (逆向更新)*
*更新日期: YYYY-MM-DD (请替换为实际更新日期)*